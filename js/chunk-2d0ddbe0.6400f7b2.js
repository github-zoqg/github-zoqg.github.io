(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddbe0"],{"834c":function(e,t,n){"use strict";n.r(t);var s=n("8bbf");const o={id:"animation"};function c(e,t,n,c,i,a){return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",o)}var i=n("5a89"),a=n("4721"),l=n("4b1d"),r=n("34ad"),d=n("0ca5"),m=n("32d9"),h=n("93e9"),u=n("4e15"),w=n("3934"),b=n("360d");let g=null,p=!1,f=null,x=null,k=null;var j={data(){return{renderer:null,camera:null,scence:null,controls:null,mixer:null,clock:null}},mounted(){this.init()},methods:{init(){k=new i["Fb"]({antialias:!0}),k.setPixelRatio(window.devicePixelRatio);let e=window.innerWidth-200,t=document.querySelector(".content-box").offsetHeight;k.setSize(e,t),k.outputEncoding=i["Gb"],this.scene=new i["ob"],this.addAxesHelper(),this.scene.background=new i["m"](12575709);const n=new i["cb"](k);this.scene.environment=n.fromScene(new l["a"],.04).texture;const s=new d["a"];s.setDecoderPath("/static/gltf/");const o=new r["a"];o.setDRACOLoader(s);let c=this,a=null;this.clock=new i["l"],o.load("/static/glbs/LittlestTokyo.glb",(function(e){const t=e.scene;a=t.getObjectByName("Object675"),console.log(a,"card");for(let n=0;n<a.children.length;n++){const e=a.children[n];e.traverse((function(t){t.isMesh&&(t.ancestors=e)}))}console.log(O.scene.children[1],"intersects"),console.log(O.scene.children,"_that.scene.children"),t.position.set(1,1,0),t.scale.set(.01,.01,.01),c.scene.add(t),c.mixer=new i["c"](t),console.log(c.mixer.clipAction(e.animations[0]),"gltf.animations"),g=c.mixer.clipAction(e.animations[0]),c.mixer.clipAction(e.animations[0]).play(),c.animate()}),void 0,(function(e){console.error(e)})),this.camera=new i["db"](40,e/t,1,100),this.camera.position.set(5,2,8),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.addControls(),document.querySelector("#animation").appendChild(k.domElement);const j=new i["mb"],v=new i["Bb"],O=this;x=new m["a"](k);const P=new h["a"](this.scene,this.camera),A=new u["a"](new i["Bb"](e,t),this.scene,this.camera);A.edgeStrength=2,A.edgeGlow=.5,A.edgeThickness=1;const y=new b["a"](w["a"]);x.addPass(P),x.addPass(A),x.addPass(y),x.render(),k.domElement.onclick=function(n){console.log(n.clientX,n.clientY),v.x=n.clientX/e*2-1,v.y=-n.clientY/t*2+1,j.setFromCamera(v,O.camera);const s=j.intersectObjects([a],!0);s.length>0&&(console.log("点击到对象:",s),console.log("flag:",p),console.log("animates.time:",g.time),p?(g.paused=!1,g.time=f,A.selectedObjects=[]):(g.paused=!0,f=g.time,A.selectedObjects=[s[0].object.ancestors]),p=!p)}},addControls(){this.controls=new a["a"](this.camera,k.domElement),this.controls.target.set(0,.5,0),this.controls.update(),this.controls.enablePan=!1,this.controls.enableDamping=!0},animate(){x.render(),this.controls.update();let e=this.clock.getDelta();this.mixer.update(e),requestAnimationFrame(this.animate)},addAxesHelper(){const e=new i["d"](100);this.scene.add(e)}}},v=n("6b0d"),O=n.n(v);const P=O()(j,[["render",c]]);t["default"]=P}}]);