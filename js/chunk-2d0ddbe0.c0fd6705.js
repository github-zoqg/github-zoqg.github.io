(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddbe0"],{"834c":function(e,n,t){"use strict";t.r(n);var i=t("8bbf");const s={id:"animation"};function o(e,n,t,o,r,a){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",s)}var r=t("5a89"),a=t("4721"),c=t("4b1d"),l=t("34ad"),d=t("0ca5");let h=null,m=!1,u=null;var w={data(){return{renderer:null,camera:null,scence:null,controls:null,mixer:null,clock:null}},mounted(){this.init()},methods:{init(){this.renderer=new r["xb"]({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio);let e=window.innerWidth-200,n=window.innerHeight-1;this.renderer.setSize(e,n),this.renderer.outputEncoding=r["yb"],this.scene=new r["jb"],this.addAxesHelper(),this.scene.background=new r["l"](12575709);const t=new r["Y"](this.renderer);this.scene.environment=t.fromScene(new c["a"],.04).texture;const i=new d["a"];i.setDecoderPath("/static/gltf/");const s=new l["a"];s.setDRACOLoader(i);let o=this;this.clock=new r["k"],s.load("/static/glbs/LittlestTokyo.glb",(function(e){const n=e.scene;n.position.set(1,1,0),n.scale.set(.01,.01,.01),o.scene.add(n),o.mixer=new r["b"](n),console.log(o.mixer.clipAction(e.animations[0]),"gltf.animations"),h=o.mixer.clipAction(e.animations[0]),o.mixer.clipAction(e.animations[0]).play(),o.animate()}),void 0,(function(e){console.error(e)})),this.camera=new r["Z"](40,e/n,1,100),this.camera.position.set(5,2,8),this.camera.aspect=e/n,this.camera.updateProjectionMatrix(),this.addControls(),document.querySelector("#animation").appendChild(this.renderer.domElement);const a=new r["hb"],w=new r["ub"],p=this;this.renderer.domElement.onclick=function(e){console.log(e.clientX,e.clientY),w.x=e.clientX/window.innerWidth*2-1,w.y=-e.clientY/window.innerHeight*2+1,a.setFromCamera(w,p.camera);const n=a.intersectObjects(p.scene.children);n.length>0&&(console.log("点击到对象:",n),console.log("flag:",m),console.log("animates.time:",h.time),m&&(h.paused=!1)&&(h.time=u),!m&&(h.paused=!0)&&(u=h.time),m=!m)}},addControls(){this.controls=new a["a"](this.camera,this.renderer.domElement),this.controls.target.set(0,.5,0),this.controls.update(),this.controls.enablePan=!1,this.controls.enableDamping=!0},animate(){this.renderer.render(this.scene,this.camera),this.controls.update();let e=this.clock.getDelta();this.mixer.update(e),requestAnimationFrame(this.animate)},addAxesHelper(){const e=new r["c"](100);this.scene.add(e)}}},p=t("6b0d"),b=t.n(p);const g=b()(w,[["render",o]]);n["default"]=g}}]);