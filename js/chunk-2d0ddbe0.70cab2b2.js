(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddbe0"],{"834c":function(e,t,n){"use strict";n.r(t);var o=n("8bbf");const s={id:"animation"};function c(e,t,n,c,i,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s)}var i=n("5a89"),a=n("4721"),l=n("4b1d"),r=n("34ad"),d=n("0ca5"),m=n("32d9"),h=n("93e9"),u=n("4e15"),b=n("3934"),w=n("360d");let p=null,g=!1,f=null,x=null,k=null;var j={data(){return{renderer:null,camera:null,scence:null,controls:null,mixer:null,clock:null}},mounted(){this.init()},methods:{init(){k=new i["Fb"]({antialias:!0}),k.setPixelRatio(window.devicePixelRatio);let e=document.querySelector(".content-box").offsetWidth,t=document.querySelector(".content-box").offsetHeight;k.setSize(e,t),k.outputEncoding=i["Gb"],this.scene=new i["ob"],this.addAxesHelper(),this.scene.background=new i["m"](12575709);const n=new i["cb"](k);this.scene.environment=n.fromScene(new l["a"],.04).texture;const o=new d["a"];o.setDecoderPath("/static/gltf/");const s=new r["a"];s.setDRACOLoader(o);let c=this,a=null;this.clock=new i["l"],s.load("/static/glbs/LittlestTokyo.glb",(function(e){const t=e.scene;a=t.getObjectByName("Object675"),console.log(a,"card");for(let n=0;n<a.children.length;n++){const e=a.children[n];e.traverse((function(t){t.isMesh&&(t.ancestors=e)}))}t.position.set(1,1,0),t.scale.set(.01,.01,.01),c.scene.add(t),c.mixer=new i["c"](t),console.log(c.mixer.clipAction(e.animations[0]),"gltf.animations"),p=c.mixer.clipAction(e.animations[0]),c.mixer.clipAction(e.animations[0]).play(),c.animate()}),void 0,(function(e){console.error(e)})),this.camera=new i["db"](40,e/t,1,100),this.camera.position.set(5,2,8),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.addControls(),document.querySelector("#animation").appendChild(k.domElement);const j=new i["mb"],v=new i["Bb"],O=this;x=new m["a"](k);const P=new h["a"](this.scene,this.camera),y=new u["a"](new i["Bb"](e,t),this.scene,this.camera);y.edgeStrength=2,y.edgeGlow=.5,y.edgeThickness=1;const A=new w["a"](b["a"]);x.addPass(P),x.addPass(y),x.addPass(A),x.render(),k.domElement.onclick=function(n){console.log(n.clientX,n.clientY,e,t),v.x=n.offsetX/e*2-1,v.y=-n.offsetY/t*2+1,j.setFromCamera(v,O.camera);const o=j.intersectObjects([a],!0);o.length>0&&(console.log("点击到对象:",o),console.log("flag:",g),console.log("animates.time:",p.time),g?(p.paused=!1,p.time=f,y.selectedObjects=[]):(p.paused=!0,f=p.time,y.selectedObjects=[o[0].object.ancestors]),g=!g)}},addControls(){this.controls=new a["a"](this.camera,k.domElement),this.controls.target.set(0,.5,0),this.controls.update(),this.controls.enablePan=!1,this.controls.enableDamping=!0},animate(){x.render(),this.controls.update();let e=this.clock.getDelta();this.mixer.update(e),requestAnimationFrame(this.animate)},addAxesHelper(){const e=new i["d"](100);this.scene.add(e)}}},v=n("6b0d"),O=n.n(v);const P=O()(j,[["render",c]]);t["default"]=P}}]);